import{_ as s,o as a,c as e,Q as n}from"./chunks/framework.82820f36.js";const h=JSON.parse('{"title":"Jenkins","description":"","frontmatter":{},"headers":[],"relativePath":"deploy/jenkins.md","filePath":"deploy/jenkins.md","lastUpdated":1710431972000}'),l={name:"deploy/jenkins.md"},p=n(`<h1 id="jenkins" tabindex="-1">Jenkins <a class="header-anchor" href="#jenkins" aria-label="Permalink to &quot;Jenkins&quot;">​</a></h1><h2 id="yum-下载jenkins" tabindex="-1">yum 下载jenkins <a class="header-anchor" href="#yum-下载jenkins" aria-label="Permalink to &quot;yum 下载jenkins&quot;">​</a></h2><h2 id="配置yum源" tabindex="-1">配置yum源 <a class="header-anchor" href="#配置yum源" aria-label="Permalink to &quot;配置yum源&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span></span>
<span class="line"><span style="color:#dbd7caee;">sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span></span>
<span class="line"><span style="color:#393a34;">sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="安装jenkins" tabindex="-1">安装jenkins <a class="header-anchor" href="#安装jenkins" aria-label="Permalink to &quot;安装jenkins&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;"># 最新版本jenkins已不支持java8</span></span>
<span class="line"><span style="color:#dbd7caee;">yum install fontconfig java-11-openjdk</span></span>
<span class="line"><span style="color:#dbd7caee;">yum install jenkins -y</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;"># 最新版本jenkins已不支持java8</span></span>
<span class="line"><span style="color:#393a34;">yum install fontconfig java-11-openjdk</span></span>
<span class="line"><span style="color:#393a34;">yum install jenkins -y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="刷新配置" tabindex="-1">刷新配置 <a class="header-anchor" href="#刷新配置" aria-label="Permalink to &quot;刷新配置&quot;">​</a></h2><p>systemctl daemon-reload</p><h2 id="启动jenkins-并配置开机启动" tabindex="-1">启动jenkins，并配置开机启动 <a class="header-anchor" href="#启动jenkins-并配置开机启动" aria-label="Permalink to &quot;启动jenkins，并配置开机启动&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">systemctl start jenkins</span></span>
<span class="line"><span style="color:#dbd7caee;">systemctl enable jenkins</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">systemctl start jenkins</span></span>
<span class="line"><span style="color:#393a34;">systemctl enable jenkins</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="启动失败可能是jdk版本原因" tabindex="-1">启动失败可能是jdk版本原因 <a class="header-anchor" href="#启动失败可能是jdk版本原因" aria-label="Permalink to &quot;启动失败可能是jdk版本原因&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">在终端中执行以下命令来查找Java的安装路径：</span></span>
<span class="line"><span style="color:#dbd7caee;">update-alternatives --config java</span></span>
<span class="line"><span style="color:#dbd7caee;">执行以下命令，选择 JDK 11 作为系统默认的 Java 版本：</span></span>
<span class="line"><span style="color:#dbd7caee;">sudo update-alternatives --config java</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">在终端中执行以下命令来查找Java的安装路径：</span></span>
<span class="line"><span style="color:#393a34;">update-alternatives --config java</span></span>
<span class="line"><span style="color:#393a34;">执行以下命令，选择 JDK 11 作为系统默认的 Java 版本：</span></span>
<span class="line"><span style="color:#393a34;">sudo update-alternatives --config java</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="查看初始密码" tabindex="-1">查看初始密码 <a class="header-anchor" href="#查看初始密码" aria-label="Permalink to &quot;查看初始密码&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">/var/lib/jenkins/secrets/initialAdminPassword</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">/var/lib/jenkins/secrets/initialAdminPassword</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>1:查看防火状态</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">systemctl status firewalld</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span>
<span class="line"><span style="color:#dbd7caee;">service  iptables status</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">systemctl status firewalld</span></span>
<span class="line"><span style="color:#393a34;"></span></span>
<span class="line"><span style="color:#393a34;">service  iptables status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2:暂时关闭防火墙</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">systemctl stop firewalld</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span>
<span class="line"><span style="color:#dbd7caee;">*service  iptables stop*</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">systemctl stop firewalld</span></span>
<span class="line"><span style="color:#393a34;"></span></span>
<span class="line"><span style="color:#393a34;">*service  iptables stop*</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>3:永久关闭防火墙</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">systemctl disable firewalld</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span>
<span class="line"><span style="color:#dbd7caee;">*chkconfig iptables off*</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">systemctl disable firewalld</span></span>
<span class="line"><span style="color:#393a34;"></span></span>
<span class="line"><span style="color:#393a34;">*chkconfig iptables off*</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>4:重启防火墙</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">systemctl enable firewalld</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span>
<span class="line"><span style="color:#dbd7caee;">service iptables restart</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">systemctl enable firewalld</span></span>
<span class="line"><span style="color:#393a34;"></span></span>
<span class="line"><span style="color:#393a34;">service iptables restart</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="docker下载jenkins" tabindex="-1">docker下载jenkins <a class="header-anchor" href="#docker下载jenkins" aria-label="Permalink to &quot;docker下载jenkins&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">docker pull jenkins/jenkins</span></span>
<span class="line"><span style="color:#dbd7caee;">docker run -d -v jenkins_home:/var/jenkins_home -p 8080:8080 -p 50000:50000 jenkins/jenkins:lts</span></span>
<span class="line"><span style="color:#dbd7caee;">docker ps -a // 查看容器</span></span>
<span class="line"><span style="color:#dbd7caee;">docker images // 查看镜像</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">docker pull jenkins/jenkins</span></span>
<span class="line"><span style="color:#393a34;">docker run -d -v jenkins_home:/var/jenkins_home -p 8080:8080 -p 50000:50000 jenkins/jenkins:lts</span></span>
<span class="line"><span style="color:#393a34;">docker ps -a // 查看容器</span></span>
<span class="line"><span style="color:#393a34;">docker images // 查看镜像</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="需要安装的插件" tabindex="-1">需要安装的插件 <a class="header-anchor" href="#需要安装的插件" aria-label="Permalink to &quot;需要安装的插件&quot;">​</a></h2><ol><li>locale // 中文</li><li>publish over ssh</li><li>node</li></ol><h2 id="遇到的问题" tabindex="-1">遇到的问题 <a class="header-anchor" href="#遇到的问题" aria-label="Permalink to &quot;遇到的问题&quot;">​</a></h2><ol><li>仓库无法连接 解决：因为jenkins是docker安装的，虽然服务器有git，但是运行的容器没有git 进入容器</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">docker exec -itu root b896766053f2 /bin/sh</span></span>
<span class="line"><span style="color:#dbd7caee;">// 查看容器当前操作系统</span></span>
<span class="line"><span style="color:#dbd7caee;">cat /etc/issue</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">docker exec -itu root b896766053f2 /bin/sh</span></span>
<span class="line"><span style="color:#393a34;">// 查看容器当前操作系统</span></span>
<span class="line"><span style="color:#393a34;">cat /etc/issue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Debian 系统（不是 Ubuntu，也不是 CentOS），这里 yum 是没有的，所以不能用 yum 安装，这里用 apt-get 代替 yum。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">apt-get update</span></span>
<span class="line"><span style="color:#dbd7caee;">// 如果提示更新失败</span></span>
<span class="line"><span style="color:#dbd7caee;">sudo systemctl restart docker</span></span>
<span class="line"><span style="color:#dbd7caee;">docker restart b896766053f2</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">apt-get update</span></span>
<span class="line"><span style="color:#393a34;">// 如果提示更新失败</span></span>
<span class="line"><span style="color:#393a34;">sudo systemctl restart docker</span></span>
<span class="line"><span style="color:#393a34;">docker restart b896766053f2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>安装Git</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">apt-get install git</span></span>
<span class="line"><span style="color:#dbd7caee;">apt-get install sudo</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">apt-get install git</span></span>
<span class="line"><span style="color:#393a34;">apt-get install sudo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,33),i=[p];function c(t,r,o,d,b,u){return a(),e("div",null,i)}const k=s(l,[["render",c]]);export{h as __pageData,k as default};
