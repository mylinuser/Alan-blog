import{_ as s,o as p,c as a,Q as n}from"./chunks/framework.82e0a936.js";const e=""+new URL("gzip1.3c58749c.png",import.meta.url).href,o=""+new URL("gzip2.025d9507.png",import.meta.url).href,l=""+new URL("gzip3.9e7f4257.png",import.meta.url).href,t=""+new URL("gzip4.4c804e3d.png",import.meta.url).href,r=""+new URL("gzip5.177886ae.png",import.meta.url).href,c=""+new URL("gzip6.5d131aa0.png",import.meta.url).href,i=""+new URL("gzip7.35bce236.png",import.meta.url).href,d=""+new URL("gzip8.905155a8.png",import.meta.url).href,k=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"interview/gzip.md","filePath":"interview/gzip.md","lastUpdated":1694189773000}'),m={name:"interview/gzip.md"},g=n('<h2 id="webpack-gzip压缩" tabindex="-1">webpack GZip压缩 <a class="header-anchor" href="#webpack-gzip压缩" aria-label="Permalink to &quot;webpack GZip压缩&quot;">​</a></h2><p>gzip简介 HTTP协议上的gzip编码是一种用来改进web应用程序性能的技术，web服务器和客户端（浏览器）必须共同支持gzip。目前主流的浏览器，Chrome,firefox,IE等都支持该协议。</p><p>简单来说，gzip是一种压缩技术。经过gzip压缩后页面大小可以变为原来的30%甚至更小，这样，用户浏览页面的时候速度会快得多。</p><p>那么客户端和服务器之间是如何通信来支持gzip的呢？通过下图我们可以很清晰的了解。</p><h3 id="nginx启用gzip" tabindex="-1"><strong>nginx启用gzip</strong> <a class="header-anchor" href="#nginx启用gzip" aria-label="Permalink to &quot;**nginx启用gzip**&quot;">​</a></h3><p><img src="'+e+'" alt="Untitled"></p><h3 id="webpack构建gz文件" tabindex="-1"><strong><a href="https://so.csdn.net/so/search?q=webpack&amp;spm=1001.2101.3001.7020" target="_blank" rel="noreferrer">webpack</a>构建gz文件</strong> <a class="header-anchor" href="#webpack构建gz文件" aria-label="Permalink to &quot;**[webpack](https://so.csdn.net/so/search?q=webpack&amp;spm=1001.2101.3001.7020)构建gz文件**&quot;">​</a></h3><p>前提：项目基于&quot;webpack&quot;: “^3.6.0”</p><p><code>config/index.js</code>下有如下语句：</p><p><img src="'+o+'" alt="Untitled"></p><p>1、productionGzip默认为false，将它设置为true</p><p>2、注意到上方有注释，需要先安装compression-webpack-plugin插件</p><p>3、npm install --save-dev compression-webpack-plugin安装成功后，执行npm run build却出现报错</p><p><img src="'+l+'" alt="Untitled"></p><p>4、根据提示，修改<code>webpack.prod.conf.js</code>中的配置（asset 改为 filename）</p><p><img src="'+t+'" alt="Untitled"></p><p>5、再次执行<code>npm run build</code>，仍然有出现报错</p><p><img src="'+r+'" alt="Untitled"></p><p>查资料看，可能和插件的版本有关；</p><p>直接npm install后的版本：compression-webpack-plugin&quot;: “^7.1.2”</p><p>安装时，控制台有警告提示：compression-webpack-plugin 和 webpack 的版本不匹配</p><p><img src="'+c+`" alt="Untitled"></p><p>6、试着 降低<code>compression-webpack-plugin</code>版本到<code>1.1.12</code>，打包成功</p><p><em>先卸载高版本，再安装指定版本</em></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#BD976A;">npm</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">uninstall</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">--</span><span style="color:#BD976A;">save</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">dev</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">compression</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">webpack</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">plugin</span></span>
<span class="line"><span style="color:#BD976A;">npm</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">install</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">--</span><span style="color:#BD976A;">save</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">dev</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">compression</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">webpack</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">plugin</span><span style="color:#DBD7CAEE;">@</span><span style="color:#4C9A91;">1.1</span><span style="color:#666666;">.</span><span style="color:#4C9A91;">12</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#B07D48;">npm</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">uninstall</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">--</span><span style="color:#B07D48;">save</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">dev</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">compression</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">webpack</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">plugin</span></span>
<span class="line"><span style="color:#B07D48;">npm</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">install</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">--</span><span style="color:#B07D48;">save</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">dev</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">compression</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">webpack</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">plugin</span><span style="color:#393A34;">@</span><span style="color:#2F798A;">1.1</span><span style="color:#999999;">.</span><span style="color:#2F798A;">12</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以看到：打包出的资源文件，压缩比还是不错滴，完美~</p><p><img src="`+i+'" alt="Untitled"></p><h2 id="资源发布到服务器" tabindex="-1"><strong>资源发布到服务器</strong> <a class="header-anchor" href="#资源发布到服务器" aria-label="Permalink to &quot;**资源发布到服务器**&quot;">​</a></h2><p>访问时，通过抓包可看到 请求 和 回复 里都带有gzip标记</p><p><img src="'+d+'" alt="Untitled"></p>',30),y=[g];function B(u,h,b,D,_,A){return p(),a("div",null,y)}const z=s(m,[["render",B]]);export{k as __pageData,z as default};
