import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.82820f36.js";const B=JSON.parse('{"title":"Taro2 to Taro3","description":"","frontmatter":{},"headers":[],"relativePath":"study/Taro2ToTaro3.md","filePath":"study/Taro2ToTaro3.md","lastUpdated":1723977222000}'),p={name:"study/Taro2ToTaro3.md"},o=l(`<h1 id="taro2-to-taro3" tabindex="-1">Taro2 to Taro3 <a class="header-anchor" href="#taro2-to-taro3" aria-label="Permalink to &quot;Taro2 to Taro3&quot;">​</a></h1><h2 id="api变更" tabindex="-1">API变更 <a class="header-anchor" href="#api变更" aria-label="Permalink to &quot;API变更&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// old</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Taro</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">useDidShow</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">useDidHide</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">useState</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">useEffect</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">@tarojs/taro</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// new </span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">React</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">useState</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">useEffect</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">react</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Taro</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">useDidShow</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">useDidHide</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">@tarojs/taro</span><span style="color:#C98A7D99;">&#39;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// old</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Taro</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">useDidShow</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">useDidHide</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">useState</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">useEffect</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">@tarojs/taro</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// new </span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">React</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">useState</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">useEffect</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">react</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Taro</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">useDidShow</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">useDidHide</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">@tarojs/taro</span><span style="color:#B5695999;">&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="containview引入去掉" tabindex="-1">containView引入去掉{} <a class="header-anchor" href="#containview引入去掉" aria-label="Permalink to &quot;containView引入去掉{}&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// old</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ContainView</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">@/providers/basisProvider/components/ContainView</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// new</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ContainView</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">@/providers/basisProvider/components/ContainView</span><span style="color:#C98A7D99;">&#39;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// old</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ContainView</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">@/providers/basisProvider/components/ContainView</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// new</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ContainView</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">@/providers/basisProvider/components/ContainView</span><span style="color:#B5695999;">&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="基础组件必须声明-如view、image、text" tabindex="-1">基础组件必须声明，如View、Image、Text... <a class="header-anchor" href="#基础组件必须声明-如view、image、text" aria-label="Permalink to &quot;基础组件必须声明，如View、Image、Text...&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// 项目使用到的组件，必须引入</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">View</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Image</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Text</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ScrollView</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">@tarojs/components</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// 项目使用到的组件，必须引入</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">View</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Image</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Text</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ScrollView</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">@tarojs/components</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="组件、页面-return不能返回undefined-或者不写return" tabindex="-1">组件、页面，return不能返回undefined 或者不写return <a class="header-anchor" href="#组件、页面-return不能返回undefined-或者不写return" aria-label="Permalink to &quot;组件、页面，return不能返回undefined 或者不写return&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">isShowBall</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&amp;&amp;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#BD976A;">View</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">className</span><span style="color:#666666;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">hx-signIn-ball</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">onClick</span><span style="color:#666666;">={ </span><span style="color:#BD976A;">toHaiXin</span><span style="color:#666666;"> }&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">...</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">/</span><span style="color:#BD976A;">View</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span></span>
<span class="line"><span style="color:#758575DD;">// new  </span></span>
<span class="line"><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">isShowBall</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">?</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#BD976A;">View</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">className</span><span style="color:#666666;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">hx-signIn-ball</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">onClick</span><span style="color:#666666;">={ </span><span style="color:#BD976A;">toHaiXin</span><span style="color:#666666;"> }&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">...</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">/</span><span style="color:#BD976A;">View</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">)</span><span style="color:#CB7676;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&lt;</span><span style="color:#5DA994;">View</span><span style="color:#DBD7CAEE;"> /</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">)</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">isShowBall</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&amp;&amp;</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#B07D48;">View</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">className</span><span style="color:#999999;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">hx-signIn-ball</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">onClick</span><span style="color:#999999;">={ </span><span style="color:#B07D48;">toHaiXin</span><span style="color:#999999;"> }&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">...</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">/</span><span style="color:#B07D48;">View</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span></span>
<span class="line"><span style="color:#A0ADA0;">// new  </span></span>
<span class="line"><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">isShowBall</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">?</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#B07D48;">View</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">className</span><span style="color:#999999;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">hx-signIn-ball</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">onClick</span><span style="color:#999999;">={ </span><span style="color:#B07D48;">toHaiXin</span><span style="color:#999999;"> }&gt;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">...</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">/</span><span style="color:#B07D48;">View</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">)</span><span style="color:#AB5959;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">&lt;</span><span style="color:#2E8F82;">View</span><span style="color:#393A34;"> /</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="class组件、页面-必须声明state" tabindex="-1">class组件、页面，必须声明state <a class="header-anchor" href="#class组件、页面-必须声明state" aria-label="Permalink to &quot;class组件、页面，必须声明state&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">default</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA994;">Index</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">extends</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">Component</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// 若有使用到this.state，则必须声明</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">state</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{ }</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">default</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E8F82;">Index</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">extends</span><span style="color:#393A34;"> </span><span style="color:#59873A;">Component</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// 若有使用到this.state，则必须声明</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">state</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{ }</span></span>
<span class="line"><span style="color:#999999;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="组件引入必须以大写开头" tabindex="-1">组件引入必须以大写开头 <a class="header-anchor" href="#组件引入必须以大写开头" aria-label="Permalink to &quot;组件引入必须以大写开头&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// old</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">idCardCheckModal</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">@/module-basis/components/idCardCheckModal</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// new</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">IdCardCheckModal</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">@/module-basis/components/idCardCheckModal</span><span style="color:#C98A7D99;">&#39;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// old</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">idCardCheckModal</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">@/module-basis/components/idCardCheckModal</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// new</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">IdCardCheckModal</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">@/module-basis/components/idCardCheckModal</span><span style="color:#B5695999;">&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="数字0不是false" tabindex="-1">数字0不是false <a class="header-anchor" href="#数字0不是false" aria-label="Permalink to &quot;数字0不是false&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const </span><span style="color:#BD976A;">num</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#4C9A91;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// old</span></span>
<span class="line"><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">num</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&amp;&amp;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&lt;</span><span style="color:#5DA994;">View</span><span style="color:#666666;">&gt;&lt;</span><span style="color:#DBD7CAEE;">/</span><span style="color:#5DA994;">View</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// new</span></span>
<span class="line"><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">num</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">!==</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&amp;&amp;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&lt;</span><span style="color:#5DA994;">View</span><span style="color:#666666;">&gt;&lt;</span><span style="color:#DBD7CAEE;">/</span><span style="color:#5DA994;">View</span><span style="color:#666666;">&gt;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">const </span><span style="color:#B07D48;">num</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#2F798A;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// old</span></span>
<span class="line"><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">num</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&amp;&amp;</span><span style="color:#393A34;"> </span><span style="color:#999999;">&lt;</span><span style="color:#2E8F82;">View</span><span style="color:#999999;">&gt;&lt;</span><span style="color:#393A34;">/</span><span style="color:#2E8F82;">View</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// new</span></span>
<span class="line"><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">num</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">!==</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&amp;&amp;</span><span style="color:#393A34;"> </span><span style="color:#999999;">&lt;</span><span style="color:#2E8F82;">View</span><span style="color:#999999;">&gt;&lt;</span><span style="color:#393A34;">/</span><span style="color:#2E8F82;">View</span><span style="color:#999999;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="taro-createselectorquery使用" tabindex="-1">Taro.createSelectorQuery使用 <a class="header-anchor" href="#taro-createselectorquery使用" aria-label="Permalink to &quot;Taro.createSelectorQuery使用&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// old</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#BD976A;">query</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">Taro</span><span style="color:#666666;">.</span><span style="color:#80A665;">createSelectorQuery</span><span style="color:#666666;">().</span><span style="color:#80A665;">in</span><span style="color:#666666;">(</span><span style="color:#BD976A;">scope</span><span style="color:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// new </span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#BD976A;">query</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">Taro</span><span style="color:#666666;">.</span><span style="color:#80A665;">createSelectorQuery</span><span style="color:#666666;">()</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// old</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#B07D48;">query</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">Taro</span><span style="color:#999999;">.</span><span style="color:#59873A;">createSelectorQuery</span><span style="color:#999999;">().</span><span style="color:#59873A;">in</span><span style="color:#999999;">(</span><span style="color:#B07D48;">scope</span><span style="color:#999999;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// new </span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#B07D48;">query</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">Taro</span><span style="color:#999999;">.</span><span style="color:#59873A;">createSelectorQuery</span><span style="color:#999999;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="页面获取传入参数" tabindex="-1">页面获取传入参数 <a class="header-anchor" href="#页面获取传入参数" aria-label="Permalink to &quot;页面获取传入参数&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// old</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#BD976A;">params</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$router</span><span style="color:#666666;">.</span><span style="color:#BD976A;">params</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// new</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#BD976A;">params</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">Taro</span><span style="color:#666666;">.</span><span style="color:#80A665;">getCurrentInstance</span><span style="color:#666666;">().</span><span style="color:#BD976A;">router</span><span style="color:#666666;">.</span><span style="color:#BD976A;">params</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// old</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#B07D48;">params</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$router</span><span style="color:#999999;">.</span><span style="color:#B07D48;">params</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// new</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#B07D48;">params</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">Taro</span><span style="color:#999999;">.</span><span style="color:#59873A;">getCurrentInstance</span><span style="color:#999999;">().</span><span style="color:#B07D48;">router</span><span style="color:#999999;">.</span><span style="color:#B07D48;">params</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="boolean值的返回" tabindex="-1">boolean值的返回 <a class="header-anchor" href="#boolean值的返回" aria-label="Permalink to &quot;boolean值的返回&quot;">​</a></h2><ul><li>请确保 &amp;&amp; 两侧的值都是boolean值，否则会报一个错误信息：Cannot read property &#39;__wxElement&#39; of null</li></ul><h2 id="页面中使用fragments导致元素不可见" tabindex="-1">页面中使用fragments导致元素不可见 <a class="header-anchor" href="#页面中使用fragments导致元素不可见" aria-label="Permalink to &quot;页面中使用fragments导致元素不可见&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#BD976A;">使用Block标签代替</span></span>
<span class="line"><span style="color:#758575DD;">// old </span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;</span><span style="color:#5DA994;">fragments</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&lt;</span><span style="color:#5DA994;">View</span><span style="color:#666666;">&gt;</span><span style="color:#BD976A;">xxx</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">/</span><span style="color:#BD976A;">View</span><span style="color:#666666;">&gt;&lt;</span><span style="color:#DBD7CAEE;">/</span><span style="color:#5DA994;">fragments</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span></span>
<span class="line"><span style="color:#758575DD;">// new</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">&lt;</span><span style="color:#5DA994;">Block</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&lt;</span><span style="color:#5DA994;">View</span><span style="color:#666666;">&gt;&lt;</span><span style="color:#DBD7CAEE;">/</span><span style="color:#5DA994;">View</span><span style="color:#666666;">&gt;&lt;</span><span style="color:#DBD7CAEE;">/</span><span style="color:#5DA994;">Block</span><span style="color:#666666;">&gt;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#B07D48;">使用Block标签代替</span></span>
<span class="line"><span style="color:#A0ADA0;">// old </span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;</span><span style="color:#2E8F82;">fragments</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">&lt;</span><span style="color:#2E8F82;">View</span><span style="color:#999999;">&gt;</span><span style="color:#B07D48;">xxx</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">/</span><span style="color:#B07D48;">View</span><span style="color:#999999;">&gt;&lt;</span><span style="color:#393A34;">/</span><span style="color:#2E8F82;">fragments</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span></span>
<span class="line"><span style="color:#A0ADA0;">// new</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">&lt;</span><span style="color:#2E8F82;">Block</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">&lt;</span><span style="color:#2E8F82;">View</span><span style="color:#999999;">&gt;&lt;</span><span style="color:#393A34;">/</span><span style="color:#2E8F82;">View</span><span style="color:#999999;">&gt;&lt;</span><span style="color:#393A34;">/</span><span style="color:#2E8F82;">Block</span><span style="color:#999999;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="页面跳转参数不会自动decode" tabindex="-1">页面跳转参数不会自动decode <a class="header-anchor" href="#页面跳转参数不会自动decode" aria-label="Permalink to &quot;页面跳转参数不会自动decode&quot;">​</a></h2><ul><li>需要自己手动对全部参数decode或者按需对encode会发生变化的参数decode</li><li>为了方便，进行全局封装，使用util中的decodeObject方法</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$instance</span><span style="color:#666666;">.</span><span style="color:#BD976A;">router</span><span style="color:#666666;">.</span><span style="color:#BD976A;">params</span><span style="color:#DBD7CAEE;">  </span><span style="color:#758575DD;">// 获取带过来的参数时 taro2原生页面跳转会自动decode 但是taro3不会</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$instance</span><span style="color:#999999;">.</span><span style="color:#B07D48;">router</span><span style="color:#999999;">.</span><span style="color:#B07D48;">params</span><span style="color:#393A34;">  </span><span style="color:#A0ADA0;">// 获取带过来的参数时 taro2原生页面跳转会自动decode 但是taro3不会</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="aro2样式隔离" tabindex="-1">aro2样式隔离 <a class="header-anchor" href="#aro2样式隔离" aria-label="Permalink to &quot;aro2样式隔离&quot;">​</a></h2><p>Taro3中没有自定义组件 所以样式不隔离了,得采用BEM写法或使用CSS Module</p><h2 id="id、classname属性传递变化" tabindex="-1">id、className属性传递变化 <a class="header-anchor" href="#id、classname属性传递变化" aria-label="Permalink to &quot;id、className属性传递变化&quot;">​</a></h2><p>因为taro3中没有自定义控件了(除非层级过深 或手动指定)，因此给组件设置的id、className不会展示在dom上，需要透传到内部的真实dom上</p><h2 id="获取路由参数" tabindex="-1">获取路由参数 <a class="header-anchor" href="#获取路由参数" aria-label="Permalink to &quot;获取路由参数&quot;">​</a></h2><p>跳转成功后，在目标页面的生命周期方法中，可以通过 Taro.getCurrentInstance().router.params 获取路由参数</p><p>按照官方文档，在页面开头去$instance =getCurrentInstance()，页面跳转的时候若会执行router.params,就会报错</p><p>解决方案： 在页面一开始的时候，就去处router.params的值作为一个变量，routerParams = getCurrentInstance().router.params</p><p>hooks组件中可以换成useRouter <a href="https://taro-docs.jd.com/docs/hooks#userouter" target="_blank" rel="noreferrer">https://taro-docs.jd.com/docs/hooks#userouter</a>(opens new window)</p><h2 id="判空写法" tabindex="-1">判空写法 <a class="header-anchor" href="#判空写法" aria-label="Permalink to &quot;判空写法&quot;">​</a></h2><p>在Taro3中，可以使用?.的形式语法糖，进行判空取值</p><h2 id="在taro3中-scrollview横向滚动时-会出现滚动条且不会隐藏-可通过设置css隐藏" tabindex="-1">在Taro3中，ScrollView横向滚动时，会出现滚动条且不会隐藏， 可通过设置css隐藏 <a class="header-anchor" href="#在taro3中-scrollview横向滚动时-会出现滚动条且不会隐藏-可通过设置css隐藏" aria-label="Permalink to &quot;在Taro3中，ScrollView横向滚动时，会出现滚动条且不会隐藏， 可通过设置css隐藏&quot;">​</a></h2><p>::-webkit-scrollbar { display: none; //设置隐藏 width: 0 !important; //设置大小 height: 0 !important; //设置大小 -webkit-appearance: none; background: transparent; }</p><h2 id="在taro3中频繁setstate会造成页面卡顿可以尝试解决" tabindex="-1">在Taro3中频繁setState会造成页面卡顿可以尝试解决 <a class="header-anchor" href="#在taro3中频繁setstate会造成页面卡顿可以尝试解决" aria-label="Permalink to &quot;在Taro3中频繁setState会造成页面卡顿可以尝试解决&quot;">​</a></h2><p><a href="https://taro-docs.jd.com/taro/docs/optimized#2-customwrapper-%E7%BB%84%E4%BB%B6" target="_blank" rel="noreferrer">https://taro-docs.jd.com/taro/docs/optimized#2-customwrapper-组件</a>(opens new window)</p><h2 id="button-onclick-this指向的问题" tabindex="-1">button onclick this指向的问题 <a class="header-anchor" href="#button-onclick-this指向的问题" aria-label="Permalink to &quot;button onclick this指向的问题&quot;">​</a></h2><p>handleBack this指向了button而不是页面，导致报错。所以这里取参数会报错，所以handleBack得用箭头函数</p><h2 id="埋点sdk使用方式修改" tabindex="-1">埋点sdk使用方式修改 <a class="header-anchor" href="#埋点sdk使用方式修改" aria-label="Permalink to &quot;埋点sdk使用方式修改&quot;">​</a></h2><ol><li>scope使用Taro.getCurrentInstance().page。</li><li>element中，若页面使用了cssModule，需要改成cssModule格式。</li><li>root使用的id、className，确定在dom中存在。因为Taro3中没有自定义控件了，因此给组件设置的id、className不会展示在dom上，需要透传到内部的View上</li></ol>`,45),e=[o];function r(t,c,y,i,D,d){return a(),n("div",null,e)}const u=s(p,[["render",r]]);export{B as __pageData,u as default};
