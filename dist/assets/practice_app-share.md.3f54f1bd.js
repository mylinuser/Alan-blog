import{_ as s,o as n,c as a,Q as p}from"./chunks/framework.82e0a936.js";const E=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"practice/app-share.md","filePath":"practice/app-share.md","lastUpdated":1694189773000}'),l={name:"practice/app-share.md"},e=p(`<h2 id="小程序分享功能" tabindex="-1">小程序分享功能 <a class="header-anchor" href="#小程序分享功能" aria-label="Permalink to &quot;小程序分享功能&quot;">​</a></h2><div class="language-css vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">import </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">useShareAppMessage</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> from &#39;</span><span style="color:#666666;">@</span><span style="color:#4D9375;">tarojs</span><span style="color:#DBD7CAEE;">/taro&#39;</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">import shareUtil from &#39;@/</span><span style="color:#4D9375;">wxat-common</span><span style="color:#DBD7CAEE;">/utils/share&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">useShareAppMessage(shareUtil</span><span style="color:#666666;">.</span><span style="color:#BD976A;">buildShareCurrentPage</span><span style="color:#DBD7CAEE;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">// </span><span style="color:#4D9375;">open-type</span><span style="color:#DBD7CAEE;">=&quot;share&quot; 给按钮添加这句代码，点击按钮的时候可以弹出分享框</span></span>
<span class="line"><span style="color:#DBD7CAEE;">&lt;WKButton </span><span style="color:#4D9375;">open-type</span><span style="color:#DBD7CAEE;">=&quot;share&quot;</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    &lt;WKIcon icon=&quot;share&quot; color=&quot;</span><span style="color:#666666;font-style:italic;">#</span><span style="color:#FDAEB7;font-style:italic;">999</span><span style="color:#DBD7CAEE;">&quot; /</span><span style="color:#CB7676;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">&lt;/WKButton</span><span style="color:#CB7676;">&gt;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393A34;">import </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#998418;">useShareAppMessage</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> from &#39;</span><span style="color:#999999;">@</span><span style="color:#1E754F;">tarojs</span><span style="color:#393A34;">/taro&#39;</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">import shareUtil from &#39;@/</span><span style="color:#1E754F;">wxat-common</span><span style="color:#393A34;">/utils/share&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">useShareAppMessage(shareUtil</span><span style="color:#999999;">.</span><span style="color:#B07D48;">buildShareCurrentPage</span><span style="color:#393A34;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">// </span><span style="color:#1E754F;">open-type</span><span style="color:#393A34;">=&quot;share&quot; 给按钮添加这句代码，点击按钮的时候可以弹出分享框</span></span>
<span class="line"><span style="color:#393A34;">&lt;WKButton </span><span style="color:#1E754F;">open-type</span><span style="color:#393A34;">=&quot;share&quot;</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    &lt;WKIcon icon=&quot;share&quot; color=&quot;</span><span style="color:#999999;font-style:italic;">#</span><span style="color:#B31D28;font-style:italic;">999</span><span style="color:#393A34;">&quot; /</span><span style="color:#AB5959;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">&lt;/WKButton</span><span style="color:#AB5959;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="useshareappmessage" tabindex="-1"><strong>useShareAppMessage</strong> <a class="header-anchor" href="#useshareappmessage" aria-label="Permalink to &quot;**useShareAppMessage**&quot;">​</a></h3><p>监听用户点击页面内转发按钮（Button 组件 openType=&#39;share&#39;）或右上角菜单“转发”按钮的行为，并自定义转发内容。等同于 <code>onShareAppMessage</code>页面生命周期钩子。</p><p><strong>【Breaking】Taro 3.0.3 开始，使用此 Hook 时必须为页面配置 <code>enableShareAppMessage: true</code>。（修改配置文件后请重新编译项目）</strong></p><div class="language-css vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">// page</span><span style="color:#666666;">.</span><span style="color:#BD976A;">js</span></span>
<span class="line"><span style="color:#DBD7CAEE;">function Index () </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">useShareAppMessage</span><span style="color:#DBD7CAEE;">(</span><span style="color:#B8A965;">res</span><span style="color:#DBD7CAEE;"> =&gt; {</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">if</span><span style="color:#DBD7CAEE;"> (</span><span style="color:#B8A965;">res</span><span style="color:#DBD7CAEE;">.</span><span style="color:#B8A965;">from</span><span style="color:#DBD7CAEE;"> === &#39;</span><span style="color:#B8A965;">button</span><span style="color:#DBD7CAEE;">&#39;) {</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      // 来自页面内转发按钮</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">console</span><span style="color:#DBD7CAEE;">.</span><span style="color:#B8A965;">log</span><span style="color:#DBD7CAEE;">(</span><span style="color:#B8A965;">res</span><span style="color:#DBD7CAEE;">.</span><span style="color:#B8A965;">target</span><span style="color:#DBD7CAEE;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    return </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">自定义转发标题</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      path: </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">/page/user?id=123</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  })</span></span>
<span class="line"><span style="color:#DBD7CAEE;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">// page</span><span style="color:#666666;">.</span><span style="color:#BD976A;">config</span><span style="color:#666666;">.</span><span style="color:#BD976A;">js</span></span>
<span class="line"><span style="color:#DBD7CAEE;">export default </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">enableShareAppMessage</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> true</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393A34;">// page</span><span style="color:#999999;">.</span><span style="color:#B07D48;">js</span></span>
<span class="line"><span style="color:#393A34;">function Index () </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">useShareAppMessage</span><span style="color:#393A34;">(</span><span style="color:#998418;">res</span><span style="color:#393A34;"> =&gt; {</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">if</span><span style="color:#393A34;"> (</span><span style="color:#998418;">res</span><span style="color:#393A34;">.</span><span style="color:#998418;">from</span><span style="color:#393A34;"> === &#39;</span><span style="color:#998418;">button</span><span style="color:#393A34;">&#39;) {</span></span>
<span class="line"><span style="color:#393A34;">      // 来自页面内转发按钮</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">console</span><span style="color:#393A34;">.</span><span style="color:#998418;">log</span><span style="color:#393A34;">(</span><span style="color:#998418;">res</span><span style="color:#393A34;">.</span><span style="color:#998418;">target</span><span style="color:#393A34;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    return </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">自定义转发标题</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      path: </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">/page/user?id=123</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">  })</span></span>
<span class="line"><span style="color:#393A34;">}</span></span>
<span class="line"><span style="color:#393A34;">// page</span><span style="color:#999999;">.</span><span style="color:#B07D48;">config</span><span style="color:#999999;">.</span><span style="color:#B07D48;">js</span></span>
<span class="line"><span style="color:#393A34;">export default </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">enableShareAppMessage</span><span style="color:#999999;">:</span><span style="color:#393A34;"> true</span></span>
<span class="line"><span style="color:#999999;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div>`,6),o=[e];function r(t,c,y,i,A,D){return n(),a("div",null,o)}const B=s(l,[["render",r]]);export{E as __pageData,B as default};
